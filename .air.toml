# .air.toml
# This tells air the root of your project
root = "."
tmp_dir = "tmp"

[build]
# Command to run.
# 1. Generate templ files
# 2. Build the *correct* main package: ./cmd/webapi
# 3. Output the *correct* binary: ./tmp/webapi
cmd = "templ generate && go build -o ./tmp/webapi ./cmd/webapi"

# The binary to run *after* building
bin = "tmp/webapi"

# File extensions to watch
include_ext = ["go", "templ"]

# Directories to ignore
exclude_dir = ["tmp", "static", "vendor"]

# Don't re-trigger a build when the _templ.go files are created
exclude_regex = ["_test.go", ".*_templ.go"]

# Add a small delay for safety
delay = 1000 # 1 second

[log]
# Show colors
color = true

[screen]
# Keep the scroll position on reload
keep_scroll = true